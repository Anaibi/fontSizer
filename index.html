<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=0.1">
  <title>using screenshot</title>
  <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
  <link href="css/style.css" rel="stylesheet">
</head>
<body id="drag2">
  
  <div id="ractive-container"></div>
  
  <script id="template" type="text/ractive">

    <div class="img-container resizable canvas-parent">
      <img id="item" src="{{imageURL}}" width="auto" height="80%">
      <svg id="canvas" class="canvas"  style="cursor: crosshair" on-click="do-measure">
        {{#each cotas:i}} 
          {{#if i%2 === 1}}
            <text class="cota" x='{{this.x}}' y='{{this.y/2}}'>
              {{i}} {{getProportion(i)}}%, {{getMeasure(i)}}px
            </text> 
          {{/if}}
          <circle cx='{{this.x}}' cy='{{this.y}}' r='{{r}}' stroke="black" stroke-width="1" fill="transparent" />
        {{/each}}
        Sorry, your browser does not support inline SVG.
      </svg>
    </div>
    
    <div class="instrus">

      <div class="file-uploader">
        <input class="blue big-button" name="file" placeholder="select file" value="{{imageInput}}">
        <button class="green small-button" on-click="loadImage" data-imgurl={{imageInput}}>Upload</button>

        {{#if images}}
        <table>
          <tr>
            <th>Used images</th>
          </tr>
          {{#each images}}
            <tr>
              <td>{{this}}</td>
              <td><span class="delete" on-click="remove" title="delete">X</span></td>
              <td><span class="reload" on-click="reload" title="reload" data-imgurl={{this}}>+</span></td>
            </tr>
          {{/each}}
        </table>
         {{/if}}
        <p>Actual image url is: </p>
        <span class="blue big-button">{{imageURL}}</span>
        <button class="green small-button" on-click="save" data-imgurl={{imageURL}}>Save</button>
      </div>

      <button class="green big-button" on-click="start">Start getting measures</button>
      <button class="red small-button" on-click="restart">Reset</button>

      <div class="instrus-text">
        <p>{{content}}</p>
        {{#if total}}
          <p>Click two points to get height.</p>
        {{/if}}
      </div>

      <div id="measures" class="measures resizable drag"> 
        {{#if total}}
          <table>
            <tr>
              <th>Measure</th>
              <th>Proportion</th>
            </tr>

            <tr>
              <td class="main" title="Main reference"><b>{{total}}px</b></td>
              <td>100%</td>
              <td><span class="delete" on-click="restart">X</span></td>
            </tr>
    
            {{#if measures}}
              {{#each measures:i}}{{#if i>0}}
                <tr>
                  <td>{{this.measure}}px</td>
                  <td>{{this.proportion}}%</td>
                  <td><span class="delete" on-click="remove">X</span></td>
                </tr>{{/if}}
              {{/each}}
            {{/if}}
          </table>
        {{/if}}
      </div>
    </div>

  </script>
  
  <script src="http://cdn.ractivejs.org/latest/ractive.min.js"></script>
  <script src="js/main.js"></script>
  <script src="js/jquery.event.drag-2.2/jquery.event.drag-2.2.js"></script>
  <script src="js/draggable.js"></script>
</body>
</html>

